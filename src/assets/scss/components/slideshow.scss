@import "compass/css3";

body {
  background-color: black;
}
@mixin slideshow($settings) { 
    $images     : map-get($settings, images); 
    $duration   : map-get($settings, duration);
    $transition : map-get($settings, transition);
    $easing     : map-get($settings, easing);
    $repeat     : map-get($settings, repeat);
    
    // total duration (in seconds) 
    $totalDuration      : $images * $duration;
    $animationSettings  : CSS3slideshow #{$totalDuration} #{$easing} 0s #{$repeat};
    $vendorsList        : (-webkit-, -moz-, -o-, '');

    position   : relative;
    cursor     : pointer;
    list-style : none;

    li {
        position : absolute;  
        z-index  : $images; 
        top      : 0;
        left     : 0;
        @each $vendor in $vendorsList {
            #{$vendor}animation: #{$animationSettings};
        }  

        @for $i from 2 through $images {

            &:nth-child(#{$i}) { 
                z-index: #{$images - $i + 1}; 
                @each $vendor in $vendorsList {
                    #{$vendor}animation-delay: #{$duration * ($i - 1)};
                }
            }

        }
    }

    &:hover {
        li {
            @each $vendor in $vendorsList {
                #{$vendor}animation-play-state: paused;
            }  
        }
    }

    @at-root {

        $endEffect: 100% / $images;
        $timeEffect: round(($transition * 100% / $totalDuration) * 100)/100;
        $startEffect: $endEffect - $timeEffect;

        @include setKeyframes(CSS3slideshow) {
          #{$startEffect}, 100% { opacity: 1; }
          #{$endEffect}, #{100% - $timeEffect} { opacity: 0; }
        }        

    } 
  
}


@mixin setKeyframes($animationName) {

    @-webkit-keyframes #{$animationName} { @content; }
    @-moz-keyframes #{$animationName}    { @content; }
    @-o-keyframes #{$animationName}      { @content; }
    @keyframes #{$animationName}         { @content; }

}

.slideshow {
    @include slideshow((
        images     : 4,                 // Amount of images in the slideshow
        duration   : 4.5s,              // Time of visibility of each image 
        transition : 2s,                // Transition time (with transition < duration)
        easing     : ease,              // Easing type
        repeat     : infinite           // 1,2,3, ... , infinite
    ));
}